### mysql 死锁机制

***

###死锁的情况
同时对同一用户操作
T1 业务 存钱        0.010s
A表的字段bank +10   0.020s
B表的字段user -10   0.030s

T2 业务 取钱        0.015s
B表的字段 user +10  0.025s
A表的字段 bank -10  0.0035s

时刻         行为
0.010s      T1 业务
0.015s      T2 业务
0.020s      T1的A表对该用户加锁
0.025s      T2的B表对该用户加锁
0.030s      T1的B表对该用户加锁 加不上，因为T2已经加锁了，要等T2释放， T1在等T2释放该用户
0.035s      T2的A表要对该用户加锁，但T1业务没有释放该用户，所以T2在等T1释放该用户   循环等待